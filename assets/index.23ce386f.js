var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{r as s,R as c,c as u,a as d}from"./vendor.afa6cd28.js";class i{constructor(e){this.lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],this.bord=e}judge(){return this.lines.filter((e=>e.every((t=>this.bord[t]===this.bord[e[0]]&&0!==this.bord[e[0]]))))}result(){return this.judge().length>0}}const m=e=>({type:"JUDGE_GAME",payload:{bord:e}}),b=()=>({type:"RESET_GAME"}),p={result:"",bord:[0,0,0,0,0,0,0,0,0],turn:"○",move:0},E=(e,s)=>{switch(s.type){case"OPENING_GAME":return e;case"JUDGE_GAME":{const d=new i(s.payload.bord).result()?"○"===e.turn?"○":"×":e.move+1===9?"drow":"";return c=((e,t)=>{for(var r in t||(t={}))l.call(t,r)&&o(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&o(e,r,t[r]);return e})({},e),u={result:d,bord:s.payload.bord,turn:"○"===e.turn?"×":"○",move:e.move+1},t(c,r(u))}case"RESET_GAME":return p;default:return e}var c,u},v=s.exports.createContext(p),g=s.exports.createContext((()=>{})),x=({children:e})=>{const[t,r]=s.exports.useReducer(E,p);return c.createElement(v.Provider,{value:t},c.createElement(g.Provider,{value:r},e))},f=()=>{const e=s.exports.useContext(v),t=s.exports.useContext(g);return[e,{judge:r=>{const n=[...e.bord];n[r]="○"===e.turn?1:2,t(m(n))},reset:()=>{t(b())}}]},h=({onReset:e})=>c.createElement("button",{className:"fixed right-4 top-4 bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 border border-blue-500 hover:border-transparent rounded",onClick:e},"Reset game");var y="_square_aktzt_1";const w=c.memo((({id:e,onJudge:t,view:r,enabled:n})=>c.createElement("button",{className:u("h-full w-full p-1 rounded-md overflow-hidden",y),onClick:()=>{n&&t(e)},disabled:!n},c.createElement("span",{className:u("block text-[72px] font-bold","○"===r?"text-red-500":"×"===r?"text-blue-500":"")},r))));var _="_stage_1le23_1";const j=()=>{const[e,{judge:t}]=f();return c.createElement("div",{id:"stage",className:u("w-full h-full p-1 grid grid-cols-3 grid-rows-3 gap-1 items-center justify-items-center",_)},[...Array(9)].map(((r,n)=>{const l=1===e.bord[n]?"○":2===e.bord[n]?"×":"",a=0===e.bord[n]&&""===e.result;return c.createElement(w,{key:`Square_${n}`,id:n,onJudge:t,view:l,enabled:a})})))};var N="_wrapper_4t6ox_1";const G=c.memo((()=>c.createElement("h1",{className:"font-bold text-6xl pb-6"},"ox Game"))),O=()=>{const[e,{reset:t}]=f(),r=c.useCallback((()=>{t()}),[]),n=c.useCallback((()=>e.result?9===e.move?e.result:`win ${e.result}`:"playing"),[e.result]);return c.createElement("div",{id:"Game"},c.createElement(G,null),c.createElement("p",{className:"mt-3"},"Turn: ",e.turn),c.createElement("div",{className:u("relative mt-2",N)},c.createElement(j,null)),c.createElement("p",{className:"mt-3"},"State: ",n()),c.createElement(h,{onReset:r}))},C=()=>c.createElement("div",{className:"App container mx-auto px-2 flex items-center justify-center",style:{height:window.innerHeight}},c.createElement(x,null,c.createElement(O,null)));d.render(c.createElement(c.StrictMode,null,c.createElement(C,null)),document.getElementById("root"));
